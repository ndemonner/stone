<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <link rel="stylesheet" href="stylesheets/screen.css" type="text/css" media="screen" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
      Stone: Dead-Simple Persistence
  </title>
  <script src="javascripts/rounded_corners_lite.inc.js" type="text/javascript"></script>
<style>

</style>
  <script type="text/javascript">
    window.onload = function() {
      settings = {
          tl: { radius: 10 },
          tr: { radius: 10 },
          bl: { radius: 10 },
          br: { radius: 10 },
          antiAlias: true,
          autoPad: true,
          validTags: ["div"]
      }
      var versionBox = new curvyCorners(settings, document.getElementById("version"));
      versionBox.applyCornersToAll();
    }
  </script>
</head>
<body>
<div id="main">

    <h1>Stone: Dead-Simple Persistence</h1>
    <div id="version" class="clickable" onclick='document.location = "http://rubyforge.org/projects/stone"; return false'>
      <p>Get Version</p>
      <a href="http://rubyforge.org/projects/stone" class="numbers">0.0.1</a>
    </div>
    <h1>&#x2192; &#8216;stone&#8217;</h1>


	<h2>What</h2>


	<p>For small applications, a database can be overkill for storing your data in a consistent and
organized manner. Therefore, Stone was built to provide plug-and-play data persistence for 
any application or framework. It is fast, and it is easy&#8230; therefore it is good.</p>


	<h2>Installing</h2>


<pre>sudo gem install stone</pre>

	<h2>Getting Up and Running</h2>


	<h3>Rails</h3>


	<ul>
	<li>Create a new file in <code>config/initializers</code> called <code>stone.rb</code></li>
	</ul>


	<ul>
	<li>Add the following code to your new file:
<pre class='syntax'>
  <span class="ident">require</span> <span class="punct">'</span><span class="string">stone</span><span class="punct">'</span>
  
  <span class="constant">Stone</span><span class="punct">.</span><span class="ident">start</span><span class="punct">(</span><span class="constant">Dir</span><span class="punct">.</span><span class="ident">pwd</span><span class="punct">,</span> <span class="constant">Dir</span><span class="punct">.</span><span class="ident">glob</span><span class="punct">(</span><span class="constant">File</span><span class="punct">.</span><span class="ident">join</span><span class="punct">(</span><span class="constant">Dir</span><span class="punct">.</span><span class="ident">pwd</span><span class="punct">,&quot;</span><span class="string">app/models/*</span><span class="punct">&quot;)),</span> <span class="symbol">:rails</span><span class="punct">)</span>
</pre></li>
	</ul>


	<ul>
	<li>Create some models! We&#8217;ll use an Author as an example:
<pre class='syntax'>
  stone-gen model:rails Author name:string
</pre></li>
	</ul>


	<h3>Merb</h3>


	<ul>
	<li>Add the following code to your <code>init.rb</code> file:
<pre class='syntax'>
  <span class="ident">require</span> <span class="punct">'</span><span class="string">stone</span><span class="punct">'</span>
  
  <span class="constant">Stone</span><span class="punct">.</span><span class="ident">start</span><span class="punct">(</span><span class="constant">Dir</span><span class="punct">.</span><span class="ident">pwd</span><span class="punct">,</span> <span class="constant">Dir</span><span class="punct">.</span><span class="ident">glob</span><span class="punct">(</span><span class="constant">File</span><span class="punct">.</span><span class="ident">join</span><span class="punct">(</span><span class="constant">Dir</span><span class="punct">.</span><span class="ident">pwd</span><span class="punct">,&quot;</span><span class="string">app/models/*</span><span class="punct">&quot;)),</span> <span class="symbol">:merb</span><span class="punct">)</span>
</pre></li>
	</ul>


	<ul>
	<li>Create some models! We&#8217;ll use an Author as an example:
<pre class='syntax'>
  stone-gen model:merb Author name:string
</pre></li>
	</ul>


	<h3>Everywhere Else</h3>


	<p>Stone was designed to provide easy data storage management for <strong>any</strong>
app, not just web ones.</p>


	<ul>
	<li>Wherever you load your app, add the following:
<pre class='syntax'>
  <span class="ident">require</span> <span class="punct">'</span><span class="string">stone</span><span class="punct">'</span>
  
  <span class="comment"># replace my/path/to/models/ with wherever your models/resources may be</span>
  <span class="constant">Stone</span><span class="punct">.</span><span class="ident">start</span><span class="punct">(</span><span class="constant">Dir</span><span class="punct">.</span><span class="ident">pwd</span><span class="punct">,</span> <span class="constant">Dir</span><span class="punct">.</span><span class="ident">glob</span><span class="punct">(</span><span class="constant">File</span><span class="punct">.</span><span class="ident">join</span><span class="punct">(</span><span class="constant">Dir</span><span class="punct">.</span><span class="ident">pwd</span><span class="punct">,&quot;</span><span class="string">my/path/to/models/*</span><span class="punct">&quot;)))</span>
</pre></li>
	</ul>


	<ul>
	<li>Create some models! We&#8217;ll use an Author as an example:
<pre class='syntax'>
  <span class="keyword">class </span><span class="class">Author</span>
    <span class="ident">include</span> <span class="constant">Stone</span><span class="punct">::</span><span class="constant">Resource</span>
    
    <span class="ident">field</span> <span class="symbol">:name</span>
    
    <span class="ident">has_many</span> <span class="symbol">:books</span>
  <span class="keyword">end</span>
</pre></li>
	</ul>


	<p>That&#8217;s it! Remember, there are no databases to install with Stone. Instead, 
your data gets persisted to files within <code>myapp/datastore/</code>.</p>


	<h2>Usage</h2>


	<h3>Get, Post, Put, and Delete</h3>


	<ul>
	<li>Getting
<pre class='syntax'>
  <span class="constant">Author</span><span class="punct">.</span><span class="ident">get</span><span class="punct">(</span><span class="ident">some_id</span><span class="punct">)</span>             <span class="comment"># gets Author with some_id</span>
  <span class="constant">Author</span><span class="punct">[</span><span class="ident">some_id</span><span class="punct">]</span>                 <span class="comment"># same as get()</span>
  
  <span class="comment"># brings back first author whose name is &quot;Nick DeMonner&quot;</span>
  <span class="constant">Author</span><span class="punct">.</span><span class="ident">first</span><span class="punct">(</span><span class="symbol">:name</span> <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Nick DeMonner</span><span class="punct">&quot;)</span>
  
  <span class="comment"># brings back first author whose name contains &quot;Nick&quot;</span>
  <span class="constant">Author</span><span class="punct">.</span><span class="ident">first</span><span class="punct">(</span><span class="symbol">:name</span><span class="punct">.</span><span class="ident">includes</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">Nick</span><span class="punct">')</span>
  
  <span class="comment"># brings back all authors whose email contains &quot;gmail.com&quot;, and who </span>
  <span class="comment"># were created before today</span>
  <span class="constant">Author</span><span class="punct">.</span><span class="ident">all</span><span class="punct">(</span><span class="symbol">:email</span><span class="punct">.</span><span class="ident">includes</span> <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">gmail.com</span><span class="punct">&quot;,</span> <span class="symbol">:created_at</span><span class="punct">.</span><span class="ident">lt</span> <span class="punct">=&gt;</span> <span class="constant">DateTime</span><span class="punct">.</span><span class="ident">now</span><span class="punct">)</span>
</pre></li>
	</ul>


	<ul>
	<li>Posting
<pre class='syntax'>
  <span class="ident">author</span> <span class="punct">=</span> <span class="constant">Author</span><span class="punct">.</span><span class="ident">new</span>
  <span class="ident">author</span><span class="punct">.</span><span class="ident">name</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">Nick DeMonner</span><span class="punct">&quot;</span>
  <span class="ident">author</span><span class="punct">.</span><span class="ident">save</span>                     <span class="comment"># calls Author.post after validations</span>
</pre></li>
	</ul>


	<ul>
	<li>Putting
<pre class='syntax'>
  <span class="ident">author</span> <span class="punct">=</span> <span class="constant">Author</span><span class="punct">[</span><span class="ident">some_id</span><span class="punct">]</span>        <span class="comment"># gets Author with id of some_id</span>
  
  <span class="comment"># updates name and calls Resource.save (which in turn calls Resource.put </span>
  <span class="comment"># because this resource is being updated, not created)</span>
  <span class="ident">author</span><span class="punct">.</span><span class="ident">update_attributes</span><span class="punct">(</span><span class="symbol">:name</span> <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Bob Bobberson</span><span class="punct">&quot;)</span>
</pre></li>
	</ul>


	<ul>
	<li>Deleting
<pre class='syntax'>
  <span class="constant">Author</span><span class="punct">.</span><span class="ident">delete</span><span class="punct">(</span><span class="ident">some_id</span><span class="punct">)</span>          <span class="comment"># deletes Author at some_id</span>
</pre></li>
	</ul>


	<h3>A Word About Finding Stuff</h3>


	<p>Stone uses a series of unique methods (Ã  la DataMapper) to finding objects. 
You may use the following methods when searching:</p>


	<ul>
	<li><pre class='syntax'>
    <span class="comment"># matches all objects whose &lt;code&gt;field&lt;/code&gt; is greater </span>
    <span class="comment"># than &lt;code&gt;thing&lt;/code&gt;</span>
    <span class="symbol">:field</span><span class="punct">.</span><span class="ident">gt</span> <span class="punct">=&gt;</span> <span class="ident">thing</span>
  </pre></li>
	</ul>


	<ul>
	<li><pre class='syntax'>
    <span class="comment"># matches objects whose &lt;code&gt;field&lt;/code&gt; is greater than </span>
    <span class="comment"># or equal to &lt;code&gt;thing&lt;/code&gt;</span>
    <span class="symbol">:field</span><span class="punct">.</span><span class="ident">gte</span> <span class="punct">=&gt;</span> <span class="ident">thing</span>
  </pre></li>
	</ul>


	<ul>
	<li><pre class='syntax'>
    <span class="comment"># matches all objects whose &lt;code&gt;field&lt;/code&gt; is less </span>
    <span class="comment"># than &lt;code&gt;thing&lt;/code&gt;</span>
    <span class="symbol">:field</span><span class="punct">.</span><span class="ident">lt</span> <span class="punct">=&gt;</span> <span class="ident">thing</span>
  </pre></li>
	</ul>


	<ul>
	<li><pre class='syntax'>
    <span class="comment"># matches all objects whose &lt;code&gt;field&lt;/code&gt; is less than</span>
    <span class="comment"># or equal to &lt;code&gt;thing&lt;/code&gt;</span>
    <span class="symbol">:field</span><span class="punct">.</span><span class="ident">lte</span> <span class="punct">=&gt;</span> <span class="ident">thing</span>
  </pre></li>
	</ul>


	<ul>
	<li><pre class='syntax'>
    <span class="comment"># matches all objects whose &lt;code&gt;field&lt;/code&gt; contains &lt;code&gt;thing&lt;/code&gt;</span>
    <span class="symbol">:field</span><span class="punct">.</span><span class="ident">includes</span> <span class="punct">=&gt;</span> <span class="ident">thing</span>
  </pre></li>
	</ul>


	<ul>
	<li><pre class='syntax'>
    <span class="comment"># matches objects whose &lt;code&gt;field&lt;/code&gt; matches &lt;code&gt;pattern&lt;/code&gt;</span>
    <span class="symbol">:field</span><span class="punct">.</span><span class="ident">matches</span> <span class="punct">=&gt;</span> <span class="ident">pattern</span>   <span class="comment"># pattern is any RegEx</span>
  </pre></li>
	</ul>


	<h2>License</h2>


	<p>This code is free to use under the terms of the <span class="caps">MIT</span> license.</p>


	<h2>Contributing</h2>


	<p><span class="caps">PLEASE</span>. Stone is extremely immature at this point&#8212;&#8220;stable&#8221; is
the watchword for the moment.</p>


	<ul>
	<li>You can grab the source using Git:
<pre class='syntax'>
  git clone git://github.com/ndemonner/stone.git
</pre></li>
	</ul>


	<p>The code is pretty well specced out, so make sure you don&#8217;t break anything
by running <code>rake ok</code> every once in a while.</p>


	<p>Please add specs for any new functionality you might add, and hit me up to
commit. =D</p>


	<h2>Contact</h2>


	<p>Comments are welcome. Join me in the <span class="caps">IRC</span> channel #stone on freenode.</p>
    <p class="coda">
      Nick DeMonner, 13th April 2008<br>
      Theme extended from <a href="http://rb2js.rubyforge.org/">Paul Battley</a>
    </p>
</div>

<!-- insert site tracking codes here, like Google Urchin -->

</body>
</html>
